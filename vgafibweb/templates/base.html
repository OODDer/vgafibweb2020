<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Title</title>
	{% load static %}
	<link rel="stylesheet" type="text/css" href="{% static 'css/custom.css' %}"/>
	<link rel="stylesheet" type="text/css" href="{% static 'css/bootstrap.css' %}"/>

</head>


<body>
	<nav class="navbar shadow fixed-top navbar-expand-xl navbar-dark" style="background-color:black;display:flex;justify-content:space-between;">

          <img style="max-width:100%;" height="50px" src="{% static 'images/vga_logo_hor.png' %}" alt="">
			<div class="d-none d-xl-block" id="score" style="color:white;font-size=auto"></div>
		<button class="navbar-toggler"  type="button" data-toggle="collapse" data-target="#navbarsExample04" aria-controls="navbarsExample04" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon" ></span>
      </button>
		<div class="collapse navbar-collapse" id="navbarsExample04">
        <ul class="navbar-nav mr-auto">
          <li class="nav-item active">
            <a   href="{% url 'home' %}"><button class="btn btn-primary" style="position:left">Home </button></a>
          </li>
          <li class="nav-item">
            <a  href="{% url 'cursos_index' %}"><button class="btn btn-primary">Cursos</button></a>
          </li>
        </ul>
      </div>


	</nav>

	<main>

		<div style="display:flex; justify-content:space-around;">
		<canvas class="d-none d-xl-block" id = "leftc" style="width=10%;"></canvas>
		<div style="width:80%;">
			<br><br><br><br>
			{% block content %}
            {% endblock %}
			</div>
		<canvas class="d-none d-xl-block" id = "rightc" style=""></canvas>
			</div>
		<div style="display:none;">
  			<img id="target" src= "{% static 'images/target.png' %}">
		</div>
	</main>

<!--	Aqui el codigo del canvas con el jueguito, quiza se podria mover a un archivo a parte-->
<script >
		var c = document.getElementById("leftc");
		var ctx = c.getContext("2d");
		var h = document.body.scrollHeight;
		var hi = window.innerHeight;
		if (hi > h) h= hi;
		var w = window.innerWidth/10;
		ctx.canvas.height = h;
		ctx.canvas.width = w;
		for (i = 0; i<=w;i+=w/5){
		ctx.beginPath();
		var off = 0;
		ctx.moveTo(i-off, 0);
		ctx.lineTo(i+off, h);
		ctx.stroke();
		}
		for (i = 0; i<h;i+=w/5){
		ctx.beginPath();
		ctx.moveTo(0, i+off);
		ctx.lineTo(300, i-off);
		ctx.stroke();
		}

		var r = document.getElementById("rightc");
		var rtx = r.getContext("2d");
		rtx.canvas.height = h;
		rtx.canvas.width = ctx.canvas.width;
		for (i = 0; i<=w;i+=w/5){
		rtx.beginPath();
		rtx.moveTo(i-off, 0);
		rtx.lineTo(i+off, h);
		rtx.stroke();
		}
		for (i = 0; i<h;i+=w/5){
		rtx.beginPath();
		rtx.moveTo(0, i+off);
		rtx.lineTo(300, i-off);
		rtx.stroke();
		}
		var image = document.getElementById('target');
		var y1  = Math.trunc((Math.random()*(10*((h/(w/5))/9))));
		var x1  = Math.trunc((Math.random()*(5)));
		if (y1 <4) y1 += 2;
		ctx.drawImage(image,(x1*(w/5))+2,(y1*(w/5))+2,(w/5)-4,(w/5)-4);
		var y2  = Math.trunc((Math.random()*(h/(10*(w/5)))));
		var x2  = Math.trunc((Math.random()*(5)));
		if (y2 <4) y2 += 2;
		rtx.drawImage(image,(x2*(w/5))+2,(y2*(w/5))+2,(w/5)-4,(w/5)-4);

		var score = 0
		var sctext = document.getElementById("score");
		sctext.innerHTML ="Score: "+score;
		var img = ctx.createImageData((w/5)-2, (w/5)-2);
		for (var i = img.data.length; --i >= 0; )
  			img.data[i] = 0;

  		var imgr = rtx.createImageData(w/5, w/5);
		for (var i = img.data.length; --i >= 0; )
  			img.data[i] = 0;

		c.onclick = function(event) {
  				var clickX = event.layerX;
  				var clickY = event.layerY;

  				console.log(`X ${clickX}, Y ${clickY}`);
  				if (x1*w/5<clickX && (x1+1)*w/5>clickX && y1*w/5<clickY && (y1+1)*w/5>clickY){
  				score +=1;
				ctx.putImageData(img, (x1*(w/5))+2, (y1*(w/5))+2);
				y1  = Math.trunc((Math.random()*(10*((h/(w/5))/9))));
				x1  = Math.trunc((Math.random()*(5)));
				if (y1<4) y1 += 2;
				ctx.drawImage(image,(x1*(w/5))+2,(y1*(w/5))+2,(w/5)-4,(w/5)-4);
		        sctext.innerHTML ="Score: "+score;

  				}
  				}

</script>
<!--  Aqui unas librerias de javascript para que la navbar funcione con las cosas chulas de bootstrap -->
	<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="{% static 'js/bootstrap.js' %}"></script>
</body>
</html>

